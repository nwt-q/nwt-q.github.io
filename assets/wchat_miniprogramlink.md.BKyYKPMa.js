import{_ as i,C as n,c as e,o as d,j as a,G as l,a8 as p,a as h}from"./chunks/framework.DMZhn_gK.js";const m=JSON.parse('{"title":"API 网关文档 - 短链服务","description":"","frontmatter":{},"headers":[],"relativePath":"wchat/miniprogramlink.md","filePath":"wchat/miniprogramlink.md","lastUpdated":1765030515000}'),r={name:"wchat/miniprogramlink.md"};function o(k,s,c,u,g,E){const t=n("ArticleMetadata");return d(),e("div",null,[s[0]||(s[0]=a("h1",{id:"api-网关文档-短链服务",tabindex:"-1"},[h("API 网关文档 - 短链服务 "),a("a",{class:"header-anchor",href:"#api-网关文档-短链服务","aria-label":'Permalink to "API 网关文档 - 短链服务"'},"​")],-1)),l(t),s[1]||(s[1]=p(`<p>本文档描述了用于短链生成和解码的 API 接口。所有请求都需要通过 <code>Authorization</code> Header 进行认证和计费。</p><h2 id="认证-authentication" tabindex="-1">认证 (Authentication) <a class="header-anchor" href="#认证-authentication" aria-label="Permalink to &quot;认证 (Authentication)&quot;">​</a></h2><p>所有 API 接口都需要在请求头中包含 <code>Authorization</code> 字段，用于用户身份验证和计费扣费。</p><ul><li><strong>Header Key:</strong> <code>Authorization</code></li><li><strong>Header Value Format:</strong> <code>[Your_Secret_Token]</code> 或 <code>Bearer [Your_Secret_Token]</code></li><li><strong>示例 Token:</strong> <code>SECRET_TEST_TOKEN_12345</code> (用于测试)</li></ul><p>每次成功调用将从用户余额中扣除配置的费用 (<code>0.1</code> ）。如果外部 API 调用失败或参数错误，费用将自动回滚。</p><h2 id="_1-小程序短链生成" tabindex="-1">1. 小程序短链生成 <a class="header-anchor" href="#_1-小程序短链生成" aria-label="Permalink to &quot;1. 小程序短链生成&quot;">​</a></h2><p>该接口用于生成微信小程序短链，对应外部服务 <code>mx.qrurl.net</code> 的 <code>type=mpshortlink</code> 功能。</p><p><strong>请求路径:</strong> <code>POST /generate-miniprogram-link</code></p><h3 id="请求参数" tabindex="-1">请求参数 <a class="header-anchor" href="#请求参数" aria-label="Permalink to &quot;请求参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>是否必填</th><th>描述</th><th>示例值</th></tr></thead><tbody><tr><td><code>appid</code></td><td>string</td><td>是</td><td>微信小程序的 AppID。</td><td><code>wx6b698b0251caccff</code></td></tr><tr><td><code>pagepath</code></td><td>string</td><td>是</td><td>小程序页面的路径。</td><td><code>pages/index/index</code></td></tr></tbody></table><p><strong>请求体示例 (JSON):</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;appid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wx6b698b0251caccff&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;pagepath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pages/index/index&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="响应格式-200-ok" tabindex="-1">响应格式 (200 OK) <a class="header-anchor" href="#响应格式-200-ok" aria-label="Permalink to &quot;响应格式 (200 OK)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>code</code></td><td>number</td><td>状态码，200 表示成功。</td></tr><tr><td><code>msg</code></td><td>string</td><td>消息提示。</td></tr><tr><td><code>miniprogram_link</code></td><td>string</td><td>生成的小程序短链 (<code>mp://</code> 开头)。</td></tr><tr><td><code>current_balance</code></td><td>string</td><td>扣费后的当前账户余额 (保留两位小数)。</td></tr></tbody></table><p><strong>成功响应示例:</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;小程序短链生成成功，费用已扣除&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;miniprogram_link&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mp://ilhyu3rfOgfbCYy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;current_balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;19.90&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_2-短链解码" tabindex="-1">2. 短链解码 <a class="header-anchor" href="#_2-短链解码" aria-label="Permalink to &quot;2. 短链解码&quot;">​</a></h2><p>该接口用于将小程序短链解码回其原始的 <code>appid</code> 和 <code>pagepath</code>。</p><p><strong>请求路径:</strong> <code>POST /decode-link</code></p><h3 id="请求参数-1" tabindex="-1">请求参数 <a class="header-anchor" href="#请求参数-1" aria-label="Permalink to &quot;请求参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>是否必填</th><th>描述</th><th>示例值</th></tr></thead><tbody><tr><td><code>link</code></td><td>string</td><td>是</td><td>需要解码的小程序短链。</td><td><code>mp://ilhyu3rfOgfbCYy</code></td></tr></tbody></table><p><strong>请求体示例 (JSON):</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;link&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mp://ilhyu3rfOgfbCYy&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="响应格式-200-ok-1" tabindex="-1">响应格式 (200 OK) <a class="header-anchor" href="#响应格式-200-ok-1" aria-label="Permalink to &quot;响应格式 (200 OK)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>code</code></td><td>number</td><td>状态码，200 表示成功。</td></tr><tr><td><code>msg</code></td><td>string</td><td>消息提示。</td></tr><tr><td><code>appid</code></td><td>string</td><td>解码得到的小程序 AppID。</td></tr><tr><td><code>page</code></td><td>string</td><td>解码得到的小程序页面路径。</td></tr><tr><td><code>current_balance</code></td><td>string</td><td>扣费后的当前账户余额 (保留两位小数)。</td></tr></tbody></table><p><strong>成功响应示例:</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;短链解码成功，费用已扣除&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;appid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wx6b698b0251caccff&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pages/index/index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;current_balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;19.80&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_3-通用短链生成" tabindex="-1">3. 通用短链生成 <a class="header-anchor" href="#_3-通用短链生成" aria-label="Permalink to &quot;3. 通用短链生成&quot;">​</a></h2><p>该接口用于生成一个普通的长 URL 短链（使用的是 <code>c1n.cn</code> 外部服务）。</p><p><strong>请求路径:</strong> <code>POST /generate-shortlink</code></p><h3 id="请求参数-2" tabindex="-1">请求参数 <a class="header-anchor" href="#请求参数-2" aria-label="Permalink to &quot;请求参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>是否必填</th><th>描述</th><th>示例值</th></tr></thead><tbody><tr><td><code>longUrl</code></td><td>string</td><td>是</td><td>需要缩短的长 URL。</td><td><code>https://www.google.com/search?q=gemini</code></td></tr></tbody></table><p><strong>请求体示例 (JSON):</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;longUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[https://www.google.com/search?q=gemini](https://www.google.com/search?q=gemini)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="响应格式-200-ok-2" tabindex="-1">响应格式 (200 OK) <a class="header-anchor" href="#响应格式-200-ok-2" aria-label="Permalink to &quot;响应格式 (200 OK)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>code</code></td><td>number</td><td>状态码，200 表示成功。</td></tr><tr><td><code>msg</code></td><td>string</td><td>消息提示。</td></tr><tr><td><code>short_url</code></td><td>string</td><td>生成的短链接。</td></tr><tr><td><code>current_balance</code></td><td>string</td><td>扣费后的当前账户余额 (保留两位小数)。</td></tr></tbody></table><p><strong>成功响应示例:</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;短链生成成功，费用已扣除&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;short_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[https://c1n.cn/xxxxxx](https://c1n.cn/xxxxxx)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;current_balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;19.70&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,38))])}const y=i(r,[["render",o]]);export{m as __pageData,y as default};
